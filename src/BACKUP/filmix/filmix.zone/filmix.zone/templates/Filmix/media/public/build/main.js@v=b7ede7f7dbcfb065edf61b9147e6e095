var main=function(t){var s={};function e(i){if(s[i])return s[i].exports;var a=s[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)e.d(i,a,function(s){return t[s]}.bind(null,a));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="/templates/Filmix/media/public/build/",e(e.s=29)}({0:function(t,s){t.exports=function(){var t={};this.tmpl=function s(e,i){if(e){var a=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):t[e]=t[e]||s(document.getElementById(e).innerHTML);return i?a(i):a}}}},2:function(t,s){t.exports=function(t){var s="tinycarousel",e={start:0,axis:"x",buttons:!0,bullets:!1,interval:!1,intervalTime:1e3,animation:!0,animationTime:500,infinite:!0};function i(i,a){this.options=t.extend({},e,a),this._defaults=e,this._name=s;var o=this,n=i.find(".viewport:first"),l=i.find(".overview:first"),r=0,d=i.find(".next:first"),c=i.find(".prev:first"),u=i.find(".bullet"),p=0,f={},h=0,m=0,v=0,$="x"===this.options.axis,b=$?"Width":"Height",g=$?"left":"top",y=null;function C(){o.options.buttons&&!o.options.infinite&&(c.toggleClass("disable",o.slideCurrent<=0),d.toggleClass("disable",o.slideCurrent>=o.slidesTotal-h)),o.options.bullets&&(u.removeClass("active"),t(u[o.slideCurrent]).addClass("active"))}return this.slideCurrent=0,this.slidesTotal=0,this.update=function(){return l.find(".mirrored").remove(),r=l.children(),p=n[0]["offset"+b],m=r.first()["outer"+b](!0),o.slidesTotal=r.length,o.slideCurrent=o.options.start||0,h=Math.floor(p/m),o.slidesTotal>h?(l.append(r.slice(0,h).clone().addClass("mirrored")),l.css(b.toLowerCase(),m*(o.slidesTotal+h)),C()):1==o.slidesTotal?(l.css(b.toLowerCase(),m),o.options.bullets=!1,o.options.buttons=!1,c.addClass("noactive").hide(),d.hide(),o.options.interval=!1):(o.options.bullets=!1,o.options.buttons=!1,c.addClass("noactive").hide(),d.hide(),o.options.interval=!1),o},this.start=function(){return o.options.interval&&(clearTimeout(y),y=setTimeout((function(){o.move(++v)}),o.options.intervalTime)),o},this.stop=function(){return clearTimeout(y),o},this.move=function(t){return v=t,o.slideCurrent=v%o.slidesTotal,v<0&&(o.slideCurrent=v=o.slidesTotal-1,l.css(g,-o.slidesTotal*m)),v>o.slidesTotal&&(o.slideCurrent=v=1,l.css(g,0)),f[g]=-v*m,l.animate(f,{queue:!1,duration:o.options.animation?o.options.animationTime:0,always:function(){i.trigger("move",[r[o.slideCurrent],o.slideCurrent])}}),C(),o.start(),o},o.update(),o.move(o.slideCurrent),o.options.buttons&&(c.click((function(){return o.move(--v),!1})),d.click((function(){return o.move(++v),!1}))),t(window).resize(o.update),o.options.bullets&&i.on("click",".bullet",(function(){return o.move(v=+t(this).attr("data-slide")),!1})),o}t.fn[s]=function(e){return this.each((function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new i(t(this),e))}))}}},29:function(t,s,e){"use strict";var i=e(2),a=e(0),o=e(4),n={interval:!0,intervalTime:12e3},l=0,r=!1,d={films:"/playlists/films",serialy:"/playlists/serials",multfilmy:"/playlists/multfilms",multserialy:"/playlists/multfilms"};function c(t){t.preventDefault();var s=$(".main-menu .active").position().left,e=$(this).position().left;e>s?p("right","left"):p("left","right"),$(this).addClass("active").siblings("li").removeClass("active"),$(".indicator").css({left:e,right:$(".main-menu").width()-(e+$(this).width())}),void 0!==$(this).attr("data-id")?(Cookies.set("main_page_cat",$(this).attr("data-id"),{path:"/"}),$(".user-playlists-slider .all-news-href").attr("href",d[$(this).attr("data-type")])):(Cookies.remove("main_page_cat",{path:"/"}),$(".user-playlists-slider .all-news-href").attr("href","/playlists"));var i=window.location.pathname.split("/"),a=i.indexOf("pages");common.getContentWithout(i[a+1])}function u(){var t=void 0!==Cookies.get("main_page_cat")?Cookies.get("main_page_cat"):"default",s={smallResol:{default:{left:"0",right:"507"},0:{left:"120.688",right:"414.312"},7:{left:"213.812",right:"318.188"},14:{left:"309.531",right:"184.469"},93:{left:"444.141",right:"46.8594"}},mediumResol:{default:{left:"0",right:"857"},0:{left:"120.688",right:"764.312"},7:{left:"213.812",right:"668.188"},14:{left:"309.531",right:"534.469"},93:{left:"444.141",right:"396.859"}},largeResol:{default:{left:"0",right:"1177"},0:{left:"120.688",right:"1084.31"},7:{left:"213.812",right:"988.188"},14:{left:"309.531",right:"854.469"},93:{left:"444.141",right:"716.859"}}},e=$(window).width();switch(!0){case e<1360:e="smallResol";break;case e<1950:e="mediumResol";break;case e>1950:e="largeResol"}$('.main-menu li[data-id="'+t+'"]').addClass("active").siblings("li").removeClass("active"),$(".indicator").css({left:parseInt(s[e][t].left),right:parseInt(s[e][t].right)})}function p(t,s){$(".indicator").css({"-moz-transition":t+" 0.3s ease, "+s+" 0.6s ease","-o-transition":t+" 0.3s ease, "+s+" 0.6s ease","-webkit-transition":t+" 0.3s ease, "+s+" 0.6s ease"})}function f(){var t=$(this),s={id:$(this).attr("data-id")};$(this).hasClass("active")&&(s.remove=!0),$.post("/api/movies/blacklist",s,(function(s){common.showInfo(s.message),$(t).toggleClass("active")}),"json")}function h(){if(5!=dle_group){var t=$(".head-title .subtitle h1").text(),s=$(".head-title .description .full-story").clone();s.find(".img:first-of-type").before("[photo_description]"),s.find(".img").remove();var e=s.html();if($(".cat-form #cat-title").val(t),$(".head-title .add-photo").show(),e=e.replace(/style="display: inline;"/g,""),$(".cat-form #cat-descriptions").text(e),$(".cat-form").slideDown(),"undefined"==typeof tinyMCE){var i=document.createElement("script");i.src="/templates/Filmix/media/public/js/tinymce/tinymce.js",document.getElementsByTagName("head")[0].appendChild(i),i.onload=function(){tinyMCE.init({mode:"exact",selector:"#cat-descriptions",toolbar:"bold italic underline addimage link bullist styleselect",menubar:!1,statusbar:!1,convert_urls:!1,resize:!1,plugins:["paste","placeholder","autoresize","link","advlist","addimage"],autoresize_min_height:120,advlist_bullet_styles:"circle",style_formats:[{title:"Subtitle",selector:"p",classes:"subtitle",styles:{width:"100%","font-weight":"600","font-size":"18px"}}],setup:function(t){t.on("focus",(function(s){$(t.iframeElement).css("background","#fff"),$(t.contentAreaContainer).addClass("focus")})).on("blur",(function(s){$(t.iframeElement).css("background","#f4f4f6"),$(t.contentAreaContainer).removeClass("focus")}))}}),setTimeout((function(){tinyMCE.activeEditor.setContent(e)}),1e3)}}}}function m(t){t.preventDefault();var s={page_title:$("#page_title").val(),page_description:$("#page_description").val(),title:$("#cat-title").val(),text:checkTextTag(tinyMCE.activeEditor.getContent()),url:window.location.pathname};$.post("/api/page/set_description",s,(function(t){"success"===t.type&&window.location.reload()}),"json")}function v(){$(".cat-form").slideUp(),$("#cat-title").val(""),tinyMCE.activeEditor.setContent("")}function b(t){var s=t.target.files,e=new FormData;$.each(s,(function(t,s){var i=s.name.replace(/(?:\.([^.]+))?$/g,"");$(".form-photo").attr("data-native",i),e.append(t,s)})),e.append("screenUpload",""),$.ajax({url:"/engine/ajax/poster_upload.php",data:e,processData:!1,contentType:!1,type:"POST",dataType:"json",success:function(t){0===t.error?($("#framesUpload").hide(),$(".form-photo").show(),$(".form-photo img").attr("src","/engine/ajax/poster_upload.php?show_img="+t.files[0]).attr("data-img",t.files[0]),$(".form-photo img").cropper({aspectRatio:26/18,built:function(t){var s=$(this).cropper("getCanvasData");$(this).cropper("setCropBoxData",s)},viewMode:3,zoomOnWheel:!1})):common.showInfo(" !   .")}})}function g(t){var s={},e=$(t.target);s.url=window.location.href;var i=$(e).closest(".img").find("img").attr("src").split("/");s.f_name=i[i.length-1].replace(/(?:\.([^.]+))?$/g,""),$.post("/api/page/rm_picture",s,(function(t){"success"===t.type&&$(e).closest(".img").remove(),$(".part-1").find(".img").length||$(".part-1").removeClass("no-empty").text("    "),common.showInfo(t.message)}),"json")}function y(){var t=[],s={};s.name=$(".form-photo").find("img").attr("data-img"),s.coords=$(".cropper-hidden").cropper("getCropBoxData"),s.iw=$(".cropper-container").width(),s.ih=$(".cropper-container").height(),t.push(s),$.post("/engine/ajax/poster_upload.php",{poster_cropper:t},(function(t){var s={};s.title=$("#input-title").val(),s.text=$("#input-answer").val(),s.url=window.location.pathname,s.picture=t[0],s.f_name=$(".form-photo").attr("data-native"),s.alt_name=$("#input-altname").val(),$.post("/api/page/add_picture",s,(function(t){if("success"===t.type){var s='<div class="img">';s+='<img src="'+t.message.file+'" alt="'+t.message.alt_name+'" title="'+t.message.title+'">',s+='<span class="answer"><b>: </b>'+t.message.description+"</span>",s+='<span class="answer"><b>Altname: </b>'+t.message.alt_name+"</span>",s+='<span class="answer"><b>Title: </b>'+t.message.title+"</span>",s+='<span class="delete icon-delete"></span>',s+="</div>",$(".part-1 .img").length?$(".part-1 .img").last().after(s):$(".part-1").html(s).addClass("no-empty"),C()}else common.showInfo(t.message),C()}),"json")}),"json")}function C(){$("#framesUpload").show(),$(".form-photo").hide(),$(".form-photo img").cropper("destroy").attr("src","").attr("data-img",""),$(".inputs input").val("");var t=$("#photo_cat");t.replaceWith(t.val("").clone(!0))}function w(t){$(t.target).closest(".img").find(".answer").toggle()}function _(t){t.preventDefault();var s=t.keyCode;r&&37===s?$(".navigation a").hasClass("prev")&&(l=$(".navigation .prev").attr("href"),window.location.href=l,r=!1):r&&39===s&&$(".navigation a").hasClass("next")&&(l=$(".navigation .next").attr("href"),window.location.href=l,r=!1)}$(document).ready((function(){i($),a(),o(),$("#favorites").tinycarousel(n),$("body").on("click",".shortstory .add-to-bl",f),$("body").on("click",".main-menu li.active",(function(t){t.preventDefault()})),$("body").on("click",".main-menu li:not(.active):not(.indicator)",c),$("body").on("click",".change-cat",h),$("body").on("click",".submitChangeCat",m),$("body").on("click",".cancelChangeCat",v),$("body").on("change","#photo_cat",b),$("body").on("click","#add_photo_cat .delete",g),$("body").on("click",".submit-add-photo",y),$("body").on("click",".cancel-add-photo",C),$("body").on("click",".read",w),$("html").on("keydown",(function(t){18==t.keyCode&&(r=!0)})),$("html").on("keyup",_),u()})),$(window).resize((function(){u()}))},4:function(t,s,e){"use strict";t.exports=function(){function t(){var t=$(".add-to-subs");t.has(".add-subs").length?t.hasClass("active")||t.addClass("active"):t.removeClass("active")}function s(){var t=$(".add-to-subs.opened");t.has(".add-subs").length?t.hasClass("active")||t.addClass("active"):t.removeClass("active")}function e(t){return new Promise((function(s,e){$.ajax({url:"/api/v2/subscriptions/post",data:t,type:"GET",dataType:"json",success:function(t){s(t)},error:function(t){e(t)}})}))}function i(t,s){var e=s.closest(".add-to-subs").find(".sub-list-item");$.each(t,(function(t,i){"vo"==t?s.find('.sub-item[data-id="voiceovers"]').addClass("add-subs"):"quality"==t?s.find('.sub-item[data-id="quality"]').addClass("add-subs"):"episode_vo"==t&&$.each(e,(function(t,s){var e=$(s).text();i.includes(e)&&$(s).addClass("add-subs")}))})),a()}function a(){var t=$(".list-container"),s=t.find(".sub-list-item"),e=t.find('.sub-item[data-id="episode"]');$.each(s,(function(i,a){var o=t.find(".sub-list-item.add-subs");$(a).hasClass("add-subs")?(e.addClass("add-subs-missed"),s.length===o.length&&e.addClass("add-subs").removeClass("add-subs-missed"),0!==s.length&&s.length!==o.length&&e.addClass("add-subs-missed")):(e.removeClass("add-subs-missed"),0!==o.length&&e.addClass("add-subs-missed"),0===o.length&&e.removeClass("add-subs").removeClass("add-subs-missed"))}))}$("html, body").on("click",(function(s){0===$(s.target).parents(".add-to-subs").length&&0===$(s.target).parents(".translations").length&&($(".fullstory:not(.playlist)").length&&t(),$(".add-to-subs").removeClass("opened"))})),$("body").on("click",'.sub-item[data-id="quality"].add-subs',(function(){$(this).removeClass("add-subs"),$(this).closest(".fullstory").length||s();var t={post_id:$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id"),remove:!0};$.post("/api/v2/subscribe/quality",t,(function(){common.showInfo("Вы отписались от выхода лучшего качества")}))})),$("body").on("click",'.sub-item[data-id="quality"]:not(".add-subs")',(function(){if(5===dle_group)return common.showInfo('<p>Вы не авторизованы для подписки на уведомления! <span class="guest href" data-action="authblock">Авторизуйтесь</span></p>',5e3),!1;$(this).addClass("add-subs"),$(this).closest(".fullstory").length||s();var t={post_id:$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id")};$.ajax({url:"/api/v2/subscribe/quality",data:t,type:"POST",dataType:"json",statusCode:{200:function(){common.showInfo("Вы подписаны на выход лучшего качества")}}})})),$("body").on("click",'.sub-item[data-id="voiceovers"].add-subs',(function(){$(this).removeClass("add-subs"),$(this).closest(".fullstory").length||s();var t={post_id:$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id"),remove:!0};$.post("/api/v2/subscribe/vo",t,(function(){common.showInfo("Вы отписались от выхода новых озвучек")}))})),$("body").on("click",'.sub-item[data-id="voiceovers"]:not(".add-subs")',(function(){if(5===dle_group)return common.showInfo('<p>Вы не авторизованы для подписки на уведомления! <span class="guest href" data-action="authblock">Авторизуйтесь</span></p>',5e3),!1;$(this).toggleClass("add-subs"),$(this).closest(".fullstory").length||s();var t={post_id:$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id")};$.ajax({url:"/api/v2/subscribe/vo",data:t,type:"POST",dataType:"json",statusCode:{200:function(){common.showInfo("Вы подписаны на выход новых озвучек")}}})})),$("body").on("click",'.sub-item[data-id="episode"].add-subs',(function(){$(this).removeClass("add-subs").removeClass("add-subs-missed"),$(this).closest(".list-container").find(".sub-list-item").removeClass("add-subs"),$(this).closest(".fullstory").length||s();var t={post_id:$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id"),remove:!0};$.post("/api/v2/subscribe/episode",t,(function(){common.showInfo("Вы отписались от выхода новых серий")}))})),$("body").on("click",'.sub-item[data-id="episode"]:not(".add-subs")',(function(){if(5===dle_group)return common.showInfo('<p>Вы не авторизованы для подписки на уведомления! <span class="guest href" data-action="authblock">Авторизуйтесь</span></p>',5e3),!1;$(this).addClass("add-subs").removeClass("add-subs-missed"),$(this).closest(".list-container").find(".sub-list-item").addClass("add-subs"),$(this).closest(".fullstory").length||s();var t={post_id:$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id")};$.ajax({url:"/api/v2/subscribe/episode",data:t,type:"POST",dataType:"json",statusCode:{200:function(){common.showInfo("Вы подписаны на выход новых серий")}}})})),$("body").on("click",".sub-list-item.add-subs",(function(){$(this).removeClass("add-subs"),$(this).closest(".fullstory").length||s();var t=$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id"),e=$(this).text(),i={post_id:t,vo:e,remove:!0};$.post("/api/v2/subscribe/vo-episode",i,(function(){common.showInfo("Вы отписались от выхода новых серий в озвучке "+e)})),a()})),$("body").on("click",'.sub-list-item:not(".add-subs")',(function(){if(5===dle_group)return common.showInfo('<p>Вы не авторизованы для подписки на уведомления! <span class="guest href" data-action="authblock">Авторизуйтесь</span></p>',5e3),!1;$(this).addClass("add-subs"),$(this).closest(".fullstory").length||s();var t=$(this).text(),e=$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id");(i={post_id:e,vo:t},new Promise((function(t,s){$.ajax({url:"/api/v2/subscribe/vo-episode",data:i,type:"POST",dataType:"json",success:function(s){t(s)},error:function(t){s(t)}})}))).then((function(s){common.showInfo("Вы подписаны на выход новых серий в озвучке "+t),a()}));var i})),$("body").on("click",".add-to-subs-toogle",(function(){if(5===dle_group)return common.showInfo('<p>Для подписки на уведомления - <span class="guest href" data-action="authblock">авторизуйтесь</span>! </p>',5e3),!1;var s={post_id:$(this).closest(".shortstory").attr("data-id")||$(".fullstory").attr("data-id")};if($(this).closest(".fullstory:not(.playlist)").length&&t(),$(this).closest(".add-to-subs").hasClass("opened"))$(this).closest(".add-to-subs").removeClass("opened");else{$(this).closest(".add-to-subs").addClass("opened");var o=$(this).closest(".add-to-subs").find(".list-container").attr("data-id"),n=$(this).closest(".add-to-subs").find(".sub-list-wrap"),l=$(".list-container");n.has(".sub-list-item").length?e(s).then((function(t){i(t,l)})).catch((function(t){console.error(t)})):(r=o,new Promise((function(t,s){$.ajax({url:"/api/v2/movie/p-links/"+r,type:"GET",dataType:"json",success:function(s){t(s)},error:function(t){s(t)}})}))).then((function(t){!function(t,s){$.each(t,(function(t,e){$.each(e,(function(t,e){"name"==t&&s.prepend('<li class="sub-list-item" data-id="vo-episode">'+e+"</li>")}))}))}(t,n)})).then((function(){e(s).then((function(t){i(t,l)})).catch((function(t){console.error(t)}))})).catch((function(t){console.error(t)}))}a();var r}))}}});